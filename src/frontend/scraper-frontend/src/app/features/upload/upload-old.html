<div class="upload-container">
  <mat-card class="upload-card">
    <h2 class="page-title">
      <mat-icon color="primary">language</mat-icon>
      Smart Scraper
    </h2>

    <mat-form-field appearance="outline" class="url-input">
      <mat-label>Enter URL to scrape</mat-label>
      <input matInput [(ngModel)]="url" placeholder="https://example.com" />
    </mat-form-field>

    <button mat-raised-button color="primary" (click)="onScrapeStatic()" [disabled]="loading">
      <mat-icon *ngIf="!loading">cloud_upload</mat-icon>
      <div class="spinner-container" *ngIf="loading">
        <mat-progress-spinner diameter="24" mode="indeterminate"></mat-progress-spinner>
      </div>
      <!-- <mat-progress-spinner *ngIf="loading" diameter="50"></mat-progress-spinner> -->
      <span *ngIf="!loading">Scrape</span>
    </button>
  </mat-card>

  <mat-card *ngIf="scrapedData" class="result-card">
    <div class="result-header">
      <h3>Scraped Data</h3>
      <button mat-stroked-button color="accent" (click)="downloadJson()">
        <mat-icon>download</mat-icon> Download JSON
      </button>
    </div>

    <mat-accordion multi>
      <mat-expansion-panel>
        <mat-expansion-panel-header>
          <mat-panel-title>Metadata</mat-panel-title>
        </mat-expansion-panel-header>
        <ngx-json-viewer [json]="scrapedData.metadata"></ngx-json-viewer>
      </mat-expansion-panel>

      <mat-expansion-panel>
        <mat-expansion-panel-header>
          <mat-panel-title>Headings</mat-panel-title>
        </mat-expansion-panel-header>
        <ngx-json-viewer [json]="scrapedData.headings"></ngx-json-viewer>
      </mat-expansion-panel>

      <mat-expansion-panel>
        <mat-expansion-panel-header>
          <mat-panel-title>Links</mat-panel-title>
        </mat-expansion-panel-header>
        <ngx-json-viewer [json]="scrapedData.links"></ngx-json-viewer>
      </mat-expansion-panel>

      <mat-expansion-panel>
        <mat-expansion-panel-header>
          <mat-panel-title>Images</mat-panel-title>
        </mat-expansion-panel-header>
        <ngx-json-viewer [json]="scrapedData.images"></ngx-json-viewer>
      </mat-expansion-panel>

      <mat-expansion-panel>
        <mat-expansion-panel-header>
          <mat-panel-title>Extracted Text</mat-panel-title>
        </mat-expansion-panel-header>
        <pre class="text-section">{{ scrapedData.text }}</pre>
      </mat-expansion-panel>
    </mat-accordion>
  </mat-card>
</div>
